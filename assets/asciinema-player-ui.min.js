var AsciinemaPlayer=function(e){"use strict";class t{log(){}debug(){}info(){}warn(){}error(){}}const n=Symbol("solid-proxy"),r="function"==typeof Proxy,o=Symbol("solid-track"),s={equals:(e,t)=>e===t};let l=O;const i=1,a=2,c={owned:null,cleanups:null,context:null,owner:null};var u=null;let d=null,f=null,h=null,p=null,g=0;function v(e,t){const n=f,r=u,o=0===e.length,s=void 0===t?r:t,l=o?c:{owned:null,cleanups:null,context:s?s.context:null,owner:s},i=o?e:()=>e((()=>w((()=>j(l)))));u=l,f=null;try{return F(i,!0)}finally{f=n,u=r}}function m(e,t){const n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},s,t):s).equals||void 0};return[_.bind(n),e=>("function"==typeof e&&(e=e(n.value)),x(n,e))]}function y(e,t,n){S(P(e,t,!1,i))}function b(e,t,n){n=n?Object.assign({},s,n):s;const r=P(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,S(r),_.bind(r)}function k(e){return F(e,!1)}function w(e){if(null===f)return e();const t=f;f=null;try{return e()}finally{f=t}}function $(e){!function(e,t,n){l=T;const r=P(e,t,!1,i);n&&n.render||(r.user=!0),p?p.push(r):S(r)}((()=>w(e)))}function A(e){return null===u||(null===u.cleanups?u.cleanups=[e]:u.cleanups.push(e)),e}function C(){return f}function L(e){const t=b(e),n=b((()=>z(t())));return n.toArray=()=>{const e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function _(){if(this.sources&&this.state)if(this.state===i)S(this);else{const e=h;h=null,F((()=>M(this)),!1),h=e}if(f){const e=this.observers?this.observers.length:0;f.sources?(f.sources.push(this),f.sourceSlots.push(e)):(f.sources=[this],f.sourceSlots=[e]),this.observers?(this.observers.push(f),this.observerSlots.push(f.sources.length-1)):(this.observers=[f],this.observerSlots=[f.sources.length-1])}return this.value}function x(e,t,n){let r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&F((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],r=d&&d.running;r&&d.disposed.has(n),(r?n.tState:n.state)||(n.pure?h.push(n):p.push(n),n.observers&&H(n)),r||(n.state=i)}if(h.length>1e6)throw h=[],new Error}),!1)),t}function S(e){if(!e.fn)return;j(e);const t=g;!function(e,t,n){let r;const o=u,s=f;f=u=e;try{r=e.fn(t)}catch(t){return e.pure&&(e.state=i,e.owned&&e.owned.forEach(j),e.owned=null),e.updatedAt=n+1,N(t)}finally{f=s,u=o}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?x(e,r):e.value=r,e.updatedAt=n)}(e,e.value,t)}function P(e,t,n,r=i,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:u,context:u?u.context:null,pure:n};return null===u||u!==c&&(u.owned?u.owned.push(s):u.owned=[s]),s}function E(e){if(0===e.state)return;if(e.state===a)return M(e);if(e.suspense&&w(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<g);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if((e=t[n]).state===i)S(e);else if(e.state===a){const n=h;h=null,F((()=>M(e,t[0])),!1),h=n}}function F(e,t){if(h)return e();let n=!1;t||(h=[]),p?n=!0:p=[],g++;try{const t=e();return function(e){h&&(O(h),h=null);if(e)return;const t=p;p=null,t.length&&F((()=>l(t)),!1)}(n),t}catch(e){n||(p=null),h=null,N(e)}}function O(e){for(let t=0;t<e.length;t++)E(e[t])}function T(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:E(r)}for(t=0;t<n;t++)E(e[t])}function M(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const e=r.state;e===i?r!==t&&(!r.updatedAt||r.updatedAt<g)&&E(r):e===a&&M(r,t)}}}function H(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=a,n.pure?h.push(n):p.push(n),n.observers&&H(n))}}function j(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)j(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)j(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function N(e,t=u){const n=function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e);throw n}function z(e){if("function"==typeof e&&!e.length)return z(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=z(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const W=Symbol("fallback");function D(e){for(let t=0;t<e.length;t++)e[t]()}function K(e,t){return w((()=>e(t||{})))}function B(){return!0}const q={get:(e,t,r)=>t===n?r:e.get(t),has:(e,t)=>t===n||e.has(t),set:B,deleteProperty:B,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:B,deleteProperty:B}),ownKeys:e=>e.keys()};function R(e){return(e="function"==typeof e?e():e)?e:{}}function I(){for(let e=0,t=this.length;e<t;++e){const t=this[e]();if(void 0!==t)return t}}const Z=e=>`Stale read from <${e}>.`;function U(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r=[],s=[],l=[],i=0,a=t.length>1?[]:null;return A((()=>D(l))),()=>{let c,u,d=e()||[],f=d.length;return d[o],w((()=>{let e,t,o,p,g,m,y,b,k;if(0===f)0!==i&&(D(l),l=[],r=[],s=[],i=0,a&&(a=[])),n.fallback&&(r=[W],s[0]=v((e=>(l[0]=e,n.fallback()))),i=1);else if(0===i){for(s=new Array(f),u=0;u<f;u++)r[u]=d[u],s[u]=v(h);i=f}else{for(o=new Array(f),p=new Array(f),a&&(g=new Array(f)),m=0,y=Math.min(i,f);m<y&&r[m]===d[m];m++);for(y=i-1,b=f-1;y>=m&&b>=m&&r[y]===d[b];y--,b--)o[b]=s[y],p[b]=l[y],a&&(g[b]=a[y]);for(e=new Map,t=new Array(b+1),u=b;u>=m;u--)k=d[u],c=e.get(k),t[u]=void 0===c?-1:c,e.set(k,u);for(c=m;c<=y;c++)k=r[c],u=e.get(k),void 0!==u&&-1!==u?(o[u]=s[c],p[u]=l[c],a&&(g[u]=a[c]),u=t[u],e.set(k,u)):l[c]();for(u=m;u<f;u++)u in o?(s[u]=o[u],l[u]=p[u],a&&(a[u]=g[u],a[u](u))):s[u]=v(h);s=s.slice(0,i=f),r=d.slice(0)}return s}));function h(e){if(l[u]=e,a){const[e,n]=m(u);return a[u]=n,t(d[u],e)}return t(d[u])}}}((()=>e.each),e.children,t||void 0))}function X(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r,s=[],l=[],i=[],a=[],c=0;return A((()=>D(i))),()=>{const u=e()||[],d=u.length;return u[o],w((()=>{if(0===d)return 0!==c&&(D(i),i=[],s=[],l=[],c=0,a=[]),n.fallback&&(s=[W],l[0]=v((e=>(i[0]=e,n.fallback()))),c=1),l;for(s[0]===W&&(i[0](),i=[],s=[],l=[],c=0),r=0;r<d;r++)r<s.length&&s[r]!==u[r]?a[r]((()=>u[r])):r>=s.length&&(l[r]=v(f));for(;r<s.length;r++)i[r]();return c=a.length=i.length=d,s=u.slice(0),l=l.slice(0,c)}));function f(e){i[r]=e;const[n,o]=m(u[r]);return a[r]=o,t(n,r)}}}((()=>e.each),e.children,t||void 0))}function G(e){const t=e.keyed,n=b((()=>e.when),void 0,void 0),r=t?n:b(n,void 0,{equals:(e,t)=>!e==!t});return b((()=>{const o=r();if(o){const s=e.children;return"function"==typeof s&&s.length>0?w((()=>s(t?o:()=>{if(!w(r))throw Z("Show");return n()}))):s}return e.fallback}),void 0,void 0)}function J(e){const t=L((()=>e.children)),n=b((()=>{const e=t(),n=Array.isArray(e)?e:[e];let r=()=>{};for(let e=0;e<n.length;e++){const t=e,o=n[e],s=r,l=b((()=>s()?void 0:o.when),void 0,void 0),i=o.keyed?l:b(l,void 0,{equals:(e,t)=>!e==!t});r=()=>s()||(i()?[t,l,o]:void 0)}return r}));return b((()=>{const t=n()();if(!t)return e.fallback;const[r,o,s]=t,l=s.children;return"function"==typeof l&&l.length>0?w((()=>l(s.keyed?o():()=>{if(w(n)()?.[0]!==r)throw Z("Match");return o()}))):l}),void 0,void 0)}function Q(e){return e}const V="_$DX_DELEGATE";function Y(e,t,n,r={}){let o;return v((r=>{o=r,t===document?e():le(t,e(),t.firstChild?null:void 0,n)}),r.owner),()=>{o(),t.textContent=""}}function ee(e,t,n,r){let o;const s=()=>{const t=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return t.innerHTML=e,n?t.content.firstChild.firstChild:r?t.firstChild:t.content.firstChild},l=t?()=>w((()=>document.importNode(o||(o=s()),!0))):()=>(o||(o=s())).cloneNode(!0);return l.cloneNode=l,l}function te(e,t=window.document){const n=t[V]||(t[V]=new Set);for(let r=0,o=e.length;r<o;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,ie))}}function ne(e,t){null==t?e.removeAttribute("class"):e.className=t}function re(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const r=n[0];e.addEventListener(t,n[0]=t=>r.call(e,n[1],t))}else e.addEventListener(t,n,"function"!=typeof n&&n)}function oe(e,t,n){if(!t)return n?function(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}(e,"style"):t;const r=e.style;if("string"==typeof t)return r.cssText=t;let o,s;for(s in"string"==typeof n&&(r.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[s]&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function se(e,t,n){return w((()=>e(t,n)))}function le(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return ae(e,t,r,n);y((r=>ae(e,t(),r,n)),r)}function ie(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,s=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),l=()=>{const r=t[n];if(r&&!t.disabled){const o=t[`${n}Data`];if(void 0!==o?r.call(t,o,e):r.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},i=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),e.composedPath){const n=e.composedPath();s(n[0]);for(let e=0;e<n.length-2&&(t=n[e],l());e++){if(t._$host){t=t._$host,i();break}if(t.parentNode===o)break}}else i();s(r)}function ae(e,t,n,r,o){for(;"function"==typeof n;)n=n();if(t===n)return n;const s=typeof t,l=void 0!==r;if(e=l&&n[0]&&n[0].parentNode||e,"string"===s||"number"===s){if("number"===s&&(t=t.toString())===n)return n;if(l){let o=n[0];o&&3===o.nodeType?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=de(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===s)n=de(e,n,r);else{if("function"===s)return y((()=>{let o=t();for(;"function"==typeof o;)o=o();n=ae(e,o,n,r)})),()=>n;if(Array.isArray(t)){const s=[],i=n&&Array.isArray(n);if(ce(s,t,n,o))return y((()=>n=ae(e,s,n,r,!0))),()=>n;if(0===s.length){if(n=de(e,n,r),l)return n}else i?0===n.length?ue(e,s,r):function(e,t,n){let r=n.length,o=t.length,s=r,l=0,i=0,a=t[o-1].nextSibling,c=null;for(;l<o||i<s;)if(t[l]!==n[i]){for(;t[o-1]===n[s-1];)o--,s--;if(o===l){const t=s<r?i?n[i-1].nextSibling:n[s-i]:a;for(;i<s;)e.insertBefore(n[i++],t)}else if(s===i)for(;l<o;)c&&c.has(t[l])||t[l].remove(),l++;else if(t[l]===n[s-1]&&n[i]===t[o-1]){const r=t[--o].nextSibling;e.insertBefore(n[i++],t[l++].nextSibling),e.insertBefore(n[--s],r),t[o]=n[s]}else{if(!c){c=new Map;let e=i;for(;e<s;)c.set(n[e],e++)}const r=c.get(t[l]);if(null!=r)if(i<r&&r<s){let a,u=l,d=1;for(;++u<o&&u<s&&null!=(a=c.get(t[u]))&&a===r+d;)d++;if(d>r-i){const o=t[l];for(;i<r;)e.insertBefore(n[i++],o)}else e.replaceChild(n[i++],t[l++])}else l++;else t[l++].remove()}}else l++,i++}(e,n,s):(n&&de(e),ue(e,s));n=s}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=de(e,n,r,t);de(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function ce(e,t,n,r){let o=!1;for(let s=0,l=t.length;s<l;s++){let l,i=t[s],a=n&&n[e.length];if(null==i||!0===i||!1===i);else if("object"==(l=typeof i)&&i.nodeType)e.push(i);else if(Array.isArray(i))o=ce(e,i,a)||o;else if("function"===l)if(r){for(;"function"==typeof i;)i=i();o=ce(e,Array.isArray(i)?i:[i],Array.isArray(a)?a:[a])||o}else e.push(i),o=!0;else{const t=String(i);a&&3===a.nodeType&&a.data===t?e.push(a):e.push(document.createTextNode(t))}}return o}function ue(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function de(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let r=!1;for(let s=t.length-1;s>=0;s--){const l=t[s];if(o!==l){const t=l.parentNode===e;r||s?t&&l.remove():t?e.replaceChild(o,l):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}const fe=Symbol("store-raw"),he=Symbol("store-node"),pe=Symbol("store-has"),ge=Symbol("store-self");function ve(e){let t=e[n];if(!t&&(Object.defineProperty(e,n,{value:t=new Proxy(e,$e)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const s=n[o];r[s].get&&Object.defineProperty(e,s,{enumerable:r[s].enumerable,get:r[s].get.bind(t)})}}return t}function me(e){let t;return null!=e&&"object"==typeof e&&(e[n]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ye(e,t=new Set){let n,r,o,s;if(n=null!=e&&e[fe])return n;if(!me(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,s=e.length;n<s;n++)o=e[n],(r=ye(o,t))!==o&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let i=0,a=n.length;i<a;i++)s=n[i],l[s].get||(o=e[s],(r=ye(o,t))!==o&&(e[s]=r))}return e}function be(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ke(e,t,n){if(e[t])return e[t];const[r,o]=m(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function we(e){C()&&ke(be(e,he),ge)()}const $e={get(e,t,r){if(t===fe)return e;if(t===n)return r;if(t===o)return we(e),r;const s=be(e,he),l=s[t];let i=l?l():e[t];if(t===he||t===pe||"__proto__"===t)return i;if(!l){const n=Object.getOwnPropertyDescriptor(e,t);!C()||"function"==typeof i&&!e.hasOwnProperty(t)||n&&n.get||(i=ke(s,t,i)())}return me(i)?ve(i):i},has:(e,t)=>t===fe||t===n||t===o||t===he||t===pe||"__proto__"===t||(C()&&ke(be(e,pe),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return we(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return r&&!r.get&&r.configurable&&t!==n&&t!==he?(delete r.value,delete r.writable,r.get=()=>e[n][t],r):r}};function Ae(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;void 0===n?(delete e[t],e[pe]&&e[pe][t]&&void 0!==o&&e[pe][t].$()):(e[t]=n,e[pe]&&e[pe][t]&&void 0===o&&e[pe][t].$());let l,i=be(e,he);if((l=ke(i,t,o))&&l.$((()=>n)),Array.isArray(e)&&e.length!==s){for(let t=e.length;t<s;t++)(l=i[t])&&l.$();(l=ke(i,"length",s))&&l.$(e.length)}(l=i[ge])&&l.$()}function Ce(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Ae(e,o,t[o])}}function Le(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const s=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let o=0;o<r.length;o++)Le(e,[r[o]].concat(t),n);return}if(l&&"function"===s){for(let o=0;o<e.length;o++)r(e[o],o)&&Le(e,[o].concat(t),n);return}if(l&&"object"===s){const{from:o=0,to:s=e.length-1,by:l=1}=r;for(let r=o;r<=s;r+=l)Le(e,[r].concat(t),n);return}if(t.length>1)return void Le(e[r],t,[r].concat(n));o=e[r],n=[r].concat(n)}let s=t[0];"function"==typeof s&&(s=s(o,n),s===o)||void 0===r&&null==s||(s=ye(s),void 0===r||me(o)&&me(s)&&!Array.isArray(s)?Ce(o,s):Ae(e,r,s))}function _e(...[e,t]){const n=ye(e||{}),r=Array.isArray(n);return[ve(n),function(...e){k((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=ye(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&Ae(e,n,r)}Ae(e,"length",r)}else Ce(e,t)}(n,e[0]):Le(n,e)}))}]}const xe=Symbol("store-root");function Se(e,t,n,r,o){const s=t[n];if(e===s)return;const l=Array.isArray(e);if(n!==xe&&(!me(e)||!me(s)||l!==Array.isArray(s)||o&&e[o]!==s[o]))return void Ae(t,n,e);if(l){if(e.length&&s.length&&(!r||o&&e[0]&&null!=e[0][o])){let t,n,l,i,a,c,u,d;for(l=0,i=Math.min(s.length,e.length);l<i&&(s[l]===e[l]||o&&s[l]&&e[l]&&s[l][o]===e[l][o]);l++)Se(e[l],s,l,r,o);const f=new Array(e.length),h=new Map;for(i=s.length-1,a=e.length-1;i>=l&&a>=l&&(s[i]===e[a]||o&&s[i]&&e[a]&&s[i][o]===e[a][o]);i--,a--)f[a]=s[i];if(l>a||l>i){for(n=l;n<=a;n++)Ae(s,n,e[n]);for(;n<e.length;n++)Ae(s,n,f[n]),Se(e[n],s,n,r,o);return void(s.length>e.length&&Ae(s,"length",e.length))}for(u=new Array(a+1),n=a;n>=l;n--)c=e[n],d=o&&c?c[o]:c,t=h.get(d),u[n]=void 0===t?-1:t,h.set(d,n);for(t=l;t<=i;t++)c=s[t],d=o&&c?c[o]:c,n=h.get(d),void 0!==n&&-1!==n&&(f[n]=s[t],n=u[n],h.set(d,n));for(n=l;n<e.length;n++)n in f?(Ae(s,n,f[n]),Se(e[n],s,n,r,o)):Ae(s,n,e[n])}else for(let t=0,n=e.length;t<n;t++)Se(e[t],s,t,r,o);return void(s.length>e.length&&Ae(s,"length",e.length))}const i=Object.keys(e);for(let t=0,n=i.length;t<n;t++)Se(e[i[t]],s,i[t],r,o);const a=Object.keys(s);for(let t=0,n=a.length;t<n;t++)void 0===e[a[t]]&&Ae(s,a[t],void 0)}function Pe(e,t={}){const{merge:n,key:r="id"}=t,o=ye(e);return e=>{if(!me(e)||!me(o))return o;const t=Se(o,{[xe]:e},xe,n,r);return void 0===t?e:t}}const Ee=ee("<span></span>",2);var Fe=e=>{const t=b((()=>{if(1==e.text.length){const t=e.text.codePointAt(0);if(t>=9600&&t<=9631||57520==t||57522==t)return t}})),n=b((()=>t()?" ":e.text)),r=b((()=>function(e,t,n){const r=e.get("fg"),o=e.get("bg");let s={"--offset":t,width:`${n+.01}ch`};"string"==typeof r&&(s["--fg"]=r);"string"==typeof o&&(s["--bg"]=o);return s}(e.pen,e.offset,e.cellCount))),o=b((()=>function(e,t,n){const r=Oe(e.get("fg"),e.get("bold"),"fg-"),o=Oe(e.get("bg"),!1,"bg-");let s=n??"";void 0!==t&&(s+=` cp-${t.toString(16)}`);r&&(s+=" "+r);o&&(s+=" "+o);e.has("bold")&&(s+=" ap-bright");e.has("faint")&&(s+=" ap-faint");e.has("italic")&&(s+=" ap-italic");e.has("underline")&&(s+=" ap-underline");e.has("blink")&&(s+=" ap-blink");e.get("inverse")&&(s+=" ap-inverse");return s}(e.pen,t(),e.extraClass)));return(()=>{const e=Ee.cloneNode(!0);return le(e,n),y((t=>{const n=o(),s=r();return n!==t._v$&&ne(e,t._v$=n),t._v$2=oe(e,s,t._v$2),t}),{_v$:void 0,_v$2:void 0}),e})()};function Oe(e,t,n){if("number"==typeof e)return t&&e<8&&(e+=8),`${n}${e}`}const Te=ee('<span class="ap-line" role="paragraph"></span>',2);var Me=e=>(()=>{const t=Te.cloneNode(!0);return le(t,K(X,{get each(){return(()=>{if("number"==typeof e.cursor){const t=[];let n=0,r=0;for(;r<e.segments.length&&n+e.segments[r].cellCount-1<e.cursor;){const o=e.segments[r];t.push(o),n+=o.cellCount,r++}if(r<e.segments.length){const o=e.segments[r],s=o.charWidth;let l=e.cursor-n;const i=Math.floor(l/s);l=i*s;const a=Array.from(o.text);for(i>0&&t.push({...o,text:a.slice(0,i).join("")}),t.push({...o,text:a[i],offset:n+l,cellCount:s,extraClass:"ap-cursor"}),i<a.length-1&&t.push({...o,text:a.slice(i+1).join(""),offset:n+l+1,cellCount:o.cellCount-s}),r++;r<e.segments.length;){const n=e.segments[r];t.push(n),r++}}return t}return e.segments})()},children:e=>K(Fe,function(...e){let t=!1;for(let r=0;r<e.length;r++){const o=e[r];t=t||!!o&&n in o,e[r]="function"==typeof o?(t=!0,b(o)):o}if(r&&t)return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=R(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in R(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(R(e[n])));return[...new Set(t)]}},q);const o={},s=Object.create(null);for(let t=e.length-1;t>=0;t--){const n=e[t];if(!n)continue;const r=Object.getOwnPropertyNames(n);for(let e=r.length-1;e>=0;e--){const t=r[e];if("__proto__"===t||"constructor"===t)continue;const l=Object.getOwnPropertyDescriptor(n,t);if(s[t]){const e=o[t];e&&(l.get?e.push(l.get.bind(n)):void 0!==l.value&&e.push((()=>l.value)))}else s[t]=l.get?{enumerable:!0,configurable:!0,get:I.bind(o[t]=[l.get.bind(n)])}:void 0!==l.value?l:void 0}}const l={},i=Object.keys(s);for(let e=i.length-1;e>=0;e--){const t=i[e],n=s[t];n&&n.get?Object.defineProperty(l,t,n):l[t]=n?n.value:void 0}return l}(e))})),t})();const He=ee('<pre class="ap-terminal" aria-live="off" tabindex="0"></pre>',2);var je=e=>{const t=()=>e.lineHeight??1.3333333333,n=b((()=>({width:`${e.cols}ch`,height:t()*e.rows+"em","font-size":100*(e.scale||1)+"%","font-family":e.fontFamily,"--term-line-height":`${t()}em`,"--term-cols":e.cols}))),r=b((()=>e.cursor?.[0])),o=b((()=>e.cursor?.[1]));return(()=>{const t=He.cloneNode(!0),s=e.ref;return"function"==typeof s?se(s,t):e.ref=t,le(t,K(U,{get each(){return e.lines},children:(e,t)=>K(Me,{get segments(){return e.segments},get cursor(){return(e=()=>t()===o(),b((()=>e())))()?r():null;var e}})})),y((r=>{const o=!(!e.blink&&!e.cursorHold),s=!!e.blink,l=n();return o!==r._v$&&t.classList.toggle("ap-cursor-on",r._v$=o),s!==r._v$2&&t.classList.toggle("ap-blink",r._v$2=s),r._v$3=oe(t,l,r._v$3),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()};const Ne=ee('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon" aria-label="Pause" role="button"><path d="M1,0 L4,0 L4,12 L1,12 Z"></path><path d="M8,0 L11,0 L11,12 L8,12 Z"></path></svg>',6),ze=ee('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon" aria-label="Play" role="button"><path d="M1,0 L11,6 L1,12 Z"></path></svg>',4),We=ee('<span class="ap-button ap-playback-button" tabindex="0"></span>',2),De=ee('<span class="ap-bar"><span class="ap-gutter ap-gutter-empty"></span><span class="ap-gutter ap-gutter-full"></span></span>',6),Ke=ee('<div class="ap-control-bar"><span class="ap-timer" aria-readonly="true" role="textbox" tabindex="0"><span class="ap-time-elapsed"></span><span class="ap-time-remaining"></span></span><span class="ap-progressbar"></span><span class="ap-button ap-kbd-button ap-tooltip-container" aria-label="Show keyboard shortcuts" role="button" tabindex="0"><svg version="1.1" viewBox="6 8 14 16" class="ap-icon"><path d="M0.938 8.313h22.125c0.5 0 0.938 0.438 0.938 0.938v13.5c0 0.5-0.438 0.938-0.938 0.938h-22.125c-0.5 0-0.938-0.438-0.938-0.938v-13.5c0-0.5 0.438-0.938 0.938-0.938zM1.594 22.063h20.813v-12.156h-20.813v12.156zM3.844 11.188h1.906v1.938h-1.906v-1.938zM7.469 11.188h1.906v1.938h-1.906v-1.938zM11.031 11.188h1.938v1.938h-1.938v-1.938zM14.656 11.188h1.875v1.938h-1.875v-1.938zM18.25 11.188h1.906v1.938h-1.906v-1.938zM5.656 15.031h1.938v1.938h-1.938v-1.938zM9.281 16.969v-1.938h1.906v1.938h-1.906zM12.875 16.969v-1.938h1.906v1.938h-1.906zM18.406 16.969h-1.938v-1.938h1.938v1.938zM16.531 20.781h-9.063v-1.906h9.063v1.906z"></path></svg><span class="ap-tooltip">Keyboard shortcuts (?)</span></span><span class="ap-button ap-fullscreen-button ap-tooltip-container" aria-label="Toggle fullscreen mode" role="button" tabindex="0"><svg version="1.1" viewBox="0 0 12 12" class="ap-icon ap-icon-fullscreen-on"><path d="M12,0 L7,0 L9,2 L7,4 L8,5 L10,3 L12,5 Z"></path><path d="M0,12 L0,7 L2,9 L4,7 L5,8 L3,10 L5,12 Z"></path></svg><svg version="1.1" viewBox="0 0 12 12" class="ap-icon ap-icon-fullscreen-off"><path d="M7,5 L7,0 L9,2 L11,0 L12,1 L10,3 L12,5 Z"></path><path d="M5,7 L0,7 L2,9 L0,11 L1,12 L3,10 L5,12 Z"></path></svg><span class="ap-tooltip">Fullscreen (f)</span></span></div>',34),Be=ee('<span class="ap-marker-container ap-tooltip-container"><span class="ap-marker"></span><span class="ap-tooltip"></span></span>',6);function qe(e){let t=Math.floor(e);const n=Math.floor(t/86400);t%=86400;const r=Math.floor(t/3600);t%=3600;const o=Math.floor(t/60);return t%=60,n>0?`${Re(n)}:${Re(r)}:${Re(o)}:${Re(t)}`:r>0?`${Re(r)}:${Re(o)}:${Re(t)}`:`${Re(o)}:${Re(t)}`}function Re(e){return e<10?`0${e}`:e.toString()}var Ie=e=>{const t=e=>t=>{t.preventDefault(),e(t)},n=()=>"number"==typeof e.currentTime?qe(e.currentTime):"--:--",r=()=>"number"==typeof e.remainingTime?"-"+qe(e.remainingTime):n(),o=b((()=>"number"==typeof e.duration?e.markers.filter((t=>t[0]<e.duration)):[])),s=e=>{const t=e.currentTarget.offsetWidth,n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left;return 100*Math.max(0,r/t)+"%"},[l,i]=m(!1),a=function(e,t){let n=!0;return function(){if(n){n=!1;for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];e.apply(this,o),setTimeout((()=>n=!0),t)}}}(e.onSeekClick,50),c=t=>{t._marker||t.altKey||t.shiftKey||t.metaKey||t.ctrlKey||0!==t.button||(i(!0),e.onSeekClick(s(t)))},u=e=>{e.altKey||e.shiftKey||e.metaKey||e.ctrlKey||l()&&a(s(e))},d=()=>{i(!1)};return document.addEventListener("mouseup",d),A((()=>{document.removeEventListener("mouseup",d)})),(()=>{const s=Ke.cloneNode(!0),l=s.firstChild,i=l.firstChild,a=i.nextSibling,d=l.nextSibling,f=d.nextSibling,h=f.nextSibling,p=e.ref;return"function"==typeof p?se(p,s):e.ref=s,le(s,K(G,{get when(){return e.isPausable},get children(){const n=We.cloneNode(!0);return re(n,"click",t(e.onPlayClick),!0),le(n,K(J,{get children(){return[K(Q,{get when(){return e.isPlaying},get children(){return Ne.cloneNode(!0)}}),K(Q,{get when(){return!e.isPlaying},get children(){return ze.cloneNode(!0)}})]}})),n}}),l),le(i,n),le(a,r),le(d,K(G,{get when(){return"number"==typeof e.progress||e.isSeekable},get children(){const n=De.cloneNode(!0),r=n.firstChild.nextSibling;return n.$$mousemove=u,n.$$mousedown=c,le(n,K(U,{get each(){return o()},children:(n,r)=>(()=>{const o=Be.cloneNode(!0),s=o.firstChild,l=s.nextSibling;var i;return o.$$mousedown=e=>{e._marker=!0},re(o,"click",(i=r(),t((()=>{e.onSeekClick({marker:i})}))),!0),le(l,(()=>(e=>""===e[1]?qe(e[0]):`${qe(e[0])} - ${e[1]}`)(n))),y((t=>{const r=(t=>t[0]/e.duration*100+"%")(n),l=!!(t=>"number"==typeof e.currentTime&&t[0]<=e.currentTime)(n);return r!==t._v$&&o.style.setProperty("left",t._v$=r),l!==t._v$2&&s.classList.toggle("ap-marker-past",t._v$2=l),t}),{_v$:void 0,_v$2:void 0}),o})()}),null),y((t=>oe(r,{transform:`scaleX(${e.progress||0}`},t))),n}})),re(f,"click",t(e.onHelpClick),!0),re(h,"click",t(e.onFullscreenClick),!0),y((()=>s.classList.toggle("ap-seekable",!!e.isSeekable))),s})()};te(["click","mousedown","mousemove"]);const Ze=ee('<div class="ap-overlay ap-overlay-error"><span>üí•</span></div>',4);var Ue=e=>Ze.cloneNode(!0);const Xe=ee('<div class="ap-overlay ap-overlay-loading"><span class="ap-loader"></span></div>',4);var Ge=e=>Xe.cloneNode(!0);const Je=ee('<div class="ap-overlay ap-overlay-info"><span></span></div>',4);var Qe=e=>(()=>{const t=Je.cloneNode(!0),n=t.firstChild;return le(n,(()=>e.message)),y((t=>oe(n,{"font-family":e.fontFamily},t))),t})();const Ve=ee('<div class="ap-overlay ap-overlay-start"><div class="ap-play-button"><div><span><svg version="1.1" viewBox="0 0 1000.0 1000.0" class="ap-icon"><defs><mask id="small-triangle-mask"><rect width="100%" height="100%" fill="white"></rect><polygon points="700.0 500.0, 400.00000000000006 326.7949192431122, 399.9999999999999 673.2050807568877" fill="black"></polygon></mask></defs><polygon points="1000.0 500.0, 250.0000000000001 66.98729810778059, 249.99999999999977 933.0127018922192" mask="url(#small-triangle-mask)" fill="white" class="ap-play-btn-fill"></polygon><polyline points="673.2050807568878 400.0, 326.7949192431123 600.0" stroke="white" stroke-width="90" class="ap-play-btn-stroke"></polyline></svg></span></div></div></div>',22);var Ye=e=>(()=>{const t=Ve.cloneNode(!0);var n;return re(t,"click",(n=e.onClick,e=>{e.preventDefault(),n(e)}),!0),t})();te(["click"]);const et=ee("<li><kbd>space</kbd> - pause / resume</li>",4),tt=ee("<li><kbd>‚Üê</kbd> / <kbd>‚Üí</kbd> - rewind / fast-forward by 5 seconds</li>",6),nt=ee("<li><kbd>Shift</kbd> + <kbd>‚Üê</kbd> / <kbd>‚Üí</kbd> - rewind / fast-forward by 10%</li>",8),rt=ee("<li><kbd>[</kbd> / <kbd>]</kbd> - jump to the previous / next marker</li>",6),ot=ee("<li><kbd>0</kbd>, <kbd>1</kbd>, <kbd>2</kbd> ... <kbd>9</kbd> - jump to 0%, 10%, 20% ... 90%</li>",10),st=ee("<li><kbd>,</kbd> / <kbd>.</kbd> - step back / forward, a frame at a time (when paused)</li>",6),lt=ee('<div class="ap-overlay ap-overlay-help"><div><div><p>Keyboard shortcuts</p><ul><li><kbd>f</kbd> - toggle fullscreen mode</li><li><kbd>?</kbd> - toggle this help popup</li></ul></div></div></div>',18);var it=e=>(()=>{const t=lt.cloneNode(!0),n=t.firstChild,r=n.firstChild.firstChild.nextSibling,o=r.firstChild;var s;return re(t,"click",(s=e.onClose,e=>{e.preventDefault(),s(e)}),!0),n.$$click=e=>{e.stopPropagation()},le(r,K(G,{get when(){return e.isPausable},get children(){return et.cloneNode(!0)}}),o),le(r,K(G,{get when(){return e.isSeekable},get children(){return[tt.cloneNode(!0),nt.cloneNode(!0),rt.cloneNode(!0),ot.cloneNode(!0),st.cloneNode(!0)]}}),o),y((n=>oe(t,{"font-family":e.fontFamily},n))),t})();te(["click"]);const at=ee('<div class="ap-wrapper" tabindex="-1"><div></div></div>',4);var ct=e=>{const t=e.logger,n=e.core,r=e.autoPlay,[o,s]=_e({lines:[],cursor:void 0,charW:e.charW,charH:e.charH,bordersW:e.bordersW,bordersH:e.bordersH,containerW:0,containerH:0,isPausable:!0,isSeekable:!0,isFullscreen:!1,currentTime:null,remainingTime:null,progress:null,blink:!0,cursorHold:!1}),[l,i]=m(!1),[a,c]=m(r?null:"start"),[u,d]=m(null),[f,h]=m({cols:e.cols,rows:e.rows},{equals:(e,t)=>e.cols===t.cols&&e.rows===t.rows}),[p,g]=m(void 0),[v,w]=_e([]),[C,L]=m(!1),[_,x]=m(!1),[S,P]=m(void 0),E=b((()=>f().cols||80)),F=b((()=>f().rows||24)),O=()=>!1===e.controls?0:32;let T,M,H,j,N,z,W,D,B,q;function R(){ge(),fe(),he()}function I(e){k((()=>{e.rows<f().rows&&s("lines",o.lines.slice(0,e.rows)),h(e)}))}function Z(e){null===e||r||s({lines:e.lines,cursor:e.cursor})}const U=new Promise((e=>{q=e}));n.addEventListener("ready",(e=>{let{isPausable:t,isSeekable:n,poster:r}=e;s({isPausable:t,isSeekable:n}),Z(r),q()})),n.addEventListener("metadata",(e=>{let{cols:t,rows:n,duration:r,theme:o,poster:s,markers:l}=e;k((()=>{I({cols:t,rows:n}),g(r),P(o),w(l),Z(s)}))})),n.addEventListener("play",(()=>{c(null)})),n.addEventListener("playing",(()=>{k((()=>{i(!0),c(null),Y(),pe(),de()}))})),n.addEventListener("idle",(()=>{k((()=>{i(!1),R()}))})),n.addEventListener("loading",(()=>{k((()=>{i(!1),R(),c("loader")}))})),n.addEventListener("offline",(e=>{let{message:t}=e;k((()=>{i(!1),R(),void 0!==t&&(d(t),c("info"))}))}));let X=0;n.addEventListener("ended",(e=>{let{message:n}=e;k((()=>{i(!1),R(),void 0!==n&&(d(n),c("info"))})),t.debug(`view: render count: ${X}`)})),n.addEventListener("errored",(()=>{c("error")})),n.addEventListener("resize",I),n.addEventListener("reset",(e=>{let{cols:t,rows:n,theme:r}=e;k((()=>{I({cols:t,rows:n}),P(r),Y()}))})),n.addEventListener("seeked",(()=>{he()})),n.addEventListener("terminalUpdate",(()=>{void 0===T&&(T=requestAnimationFrame(Y))}));const V=()=>{B=new ResizeObserver(function(e,t){let n;return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];clearTimeout(n),n=setTimeout((()=>e.apply(this,o)),t)}}((e=>{s({containerW:N.offsetWidth,containerH:N.offsetHeight}),N.dispatchEvent(new CustomEvent("resize",{detail:{el:z}}))}),10)),B.observe(N)};$((async()=>{t.info("view: mounted"),t.debug("view: font measurements",{charW:o.charW,charH:o.charH}),V(),s({containerW:N.offsetWidth,containerH:N.offsetHeight})})),A((()=>{n.stop(),ge(),fe(),B.disconnect()}));const Y=async()=>{const e=await n.getChanges();k((()=>{void 0!==e.lines&&e.lines.forEach(((e,t)=>{s("lines",t,Pe(e))})),void 0!==e.cursor&&s("cursor",Pe(e.cursor)),s("cursorHold",!0)})),T=void 0,X+=1},ee=b((()=>{const t=o.charW*E()+o.bordersW,n=o.charH*F()+o.bordersH;let r=e.fit??"width";if("both"===r||o.isFullscreen){r=o.containerW/(o.containerH-O())>t/n?"height":"width"}if(!1===r||"none"===r)return{};if("width"===r){const e=o.containerW/t;return{scale:e,width:o.containerW,height:n*e+O()}}if("height"===r){const e=(o.containerH-O())/n;return{scale:e,width:t*e,height:o.containerH}}throw`unsupported fit mode: ${r}`})),te=()=>{s("isFullscreen",document.fullscreenElement??document.webkitFullscreenElement)},re=()=>{o.isFullscreen?(document.exitFullscreen??document.webkitExitFullscreen??(()=>{})).apply(document):(N.requestFullscreen??N.webkitRequestFullscreen??(()=>{})).apply(N)},ie=()=>{_()?x(!1):(n.pause(),x(!0))},ae=e=>{if(!(e.altKey||e.metaKey||e.ctrlKey)){if(" "==e.key)n.togglePlay();else if(","==e.key)n.step(-1),he();else if("."==e.key)n.step(),he();else if("f"==e.key)re();else if("["==e.key)n.seek({marker:"prev"});else if("]"==e.key)n.seek({marker:"next"});else if(e.key.charCodeAt(0)>=48&&e.key.charCodeAt(0)<=57){const t=(e.key.charCodeAt(0)-48)/10;n.seek(100*t+"%")}else if("?"==e.key)ie();else if("ArrowLeft"==e.key)e.shiftKey?n.seek("<<<"):n.seek("<<");else if("ArrowRight"==e.key)e.shiftKey?n.seek(">>>"):n.seek(">>");else{if("Escape"!=e.key)return;x(!1)}e.stopPropagation(),e.preventDefault()}},ce=()=>{o.isFullscreen&&ve(!0)},ue=()=>{o.isFullscreen||ve(!1)},de=()=>{H=setInterval(he,100)},fe=()=>{clearInterval(H)},he=async()=>{const e=await n.getCurrentTime(),t=await n.getRemainingTime(),r=await n.getProgress();s({currentTime:e,remainingTime:t,progress:r})},pe=()=>{j=setInterval((()=>{s((e=>{const t={blink:!e.blink};return t.blink&&(t.cursorHold=!1),t}))}),600)},ge=()=>{clearInterval(j),s("blink",!0)},ve=e=>{clearTimeout(M),e&&(M=setTimeout((()=>ve(!1)),2e3)),L(e)},me=b((()=>{const t=e.theme||"auto/asciinema";return"auto/"===t.slice(0,5)?{name:t.slice(5),colors:S()}:{name:t}})),ye=()=>{U.then((()=>n.play()))},be=()=>{U.then((()=>n.togglePlay()))},ke=e=>{U.then((()=>n.seek(e)))},we=(()=>{const t=at.cloneNode(!0),n=t.firstChild;"function"==typeof N?se(N,t):N=t,t.addEventListener("webkitfullscreenchange",te),t.addEventListener("fullscreenchange",te),t.$$mousemove=ce,t.$$keydown=ae;return"function"==typeof z?se(z,n):z=n,n.$$mousemove=()=>ve(!0),n.addEventListener("mouseleave",ue),le(n,K(je,{get cols(){return E()},get rows(){return F()},get scale(){return ee()?.scale},get blink(){return o.blink},get lines(){return o.lines},get cursor(){return o.cursor},get cursorHold(){return o.cursorHold},get fontFamily(){return e.terminalFontFamily},get lineHeight(){return e.terminalLineHeight},ref(e){"function"==typeof W?W(e):W=e}}),null),le(n,K(G,{get when(){return!1!==e.controls},get children(){return K(Ie,{get duration(){return p()},get currentTime(){return o.currentTime},get remainingTime(){return o.remainingTime},get progress(){return o.progress},markers:v,get isPlaying(){return l()},get isPausable(){return o.isPausable},get isSeekable(){return o.isSeekable},onPlayClick:be,onFullscreenClick:re,onHelpClick:ie,onSeekClick:ke,ref(e){"function"==typeof D?D(e):D=e}})}}),null),le(n,K(J,{get children(){return[K(Q,{get when(){return"start"==a()},get children(){return K(Ye,{onClick:ye})}}),K(Q,{get when(){return"loader"==a()},get children(){return K(Ge,{})}}),K(Q,{get when(){return"info"==a()},get children(){return K(Qe,{get message(){return u()},get fontFamily(){return e.terminalFontFamily}})}}),K(Q,{get when(){return"error"==a()},get children(){return K(Ue,{})}})]}}),null),le(n,K(G,{get when(){return _()},get children(){return K(it,{get fontFamily(){return e.terminalFontFamily},onClose:()=>x(!1),get isPausable(){return o.isPausable},get isSeekable(){return o.isSeekable}})}}),null),y((r=>{const o=!!(!0===e.controls||"auto"===e.controls&&C()),s=`ap-player asciinema-player-theme-${me().name}`,l=(()=>{const t={};!1!==e.fit&&"none"!==e.fit||void 0===e.terminalFontSize||("small"===e.terminalFontSize?t["font-size"]="12px":"medium"===e.terminalFontSize?t["font-size"]="18px":"big"===e.terminalFontSize?t["font-size"]="24px":t["font-size"]=e.terminalFontSize);const n=ee();void 0!==n.width&&(t.width=`${n.width}px`,t.height=`${n.height}px`);const r=me().colors;return r&&(t["--term-color-foreground"]=r.foreground,t["--term-color-background"]=r.background,r.palette.forEach(((e,n)=>{t[`--term-color-${n}`]=e}))),t})();return o!==r._v$&&t.classList.toggle("ap-hud",r._v$=o),s!==r._v$2&&ne(n,r._v$2=s),r._v$3=oe(n,l,r._v$3),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})();return we};function ut(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e,t){const n=80,r=24,o=document.createElement("div");let s;o.style.height="0px",o.style.overflow="hidden",o.style.fontSize="15px",document.body.appendChild(o);const l=Y((()=>(s=K(je,{cols:n,rows:r,lineHeight:t,fontFamily:e,lines:[]}),s)),o),i={charW:s.clientWidth/n,charH:s.clientHeight/r,bordersW:s.offsetWidth-s.clientWidth,bordersH:s.offsetHeight-s.clientHeight};return l(),document.body.removeChild(o),i}(n.terminalFontFamily,n.terminalLineHeight),o={core:e,logger:n.logger,cols:n.cols,rows:n.rows,fit:n.fit,controls:n.controls,autoPlay:n.autoPlay,terminalFontSize:n.terminalFontSize,terminalFontFamily:n.terminalFontFamily,terminalLineHeight:n.terminalLineHeight,theme:n.theme,...r};let s;const l=Y((()=>(s=K(ct,o),s)),t);return{el:s,dispose:l}}te(["keydown","mousemove"]);const dt=["autoPlay","autoplay","cols","idleTimeLimit","loop","markers","pauseOnMarkers","poster","preload","rows","speed","startAt"],ft=["autoPlay","autoplay","cols","controls","fit","rows","terminalFontFamily","terminalFontSize","terminalLineHeight","theme"];class ht{constructor(e,t,n){this.worker=new Worker(e),this.worker.onmessage=this._onMessage.bind(this),this.nextId=1,this.eventHandlers=new Map([["ended",[]],["errored",[]],["idle",[]],["input",[]],["loading",[]],["marker",[]],["metadata",[]],["offline",[]],["pause",[]],["play",[]],["playing",[]],["ready",[]],["reset",[]],["resize",[]],["seeked",[]],["terminalUpdate",[]]]),this.resolves=new Map,this._sendCommand("new",[t,n])}async init(){return this._sendCommand("init")}play(){return this._sendCommand("play")}pause(){return this._sendCommand("pause")}togglePlay(){return this._sendCommand("togglePlay")}seek(e){return this._sendCommand("seek",e)}step(e){return this._sendCommand("step",e)}stop(){return this._sendCommand("stop")}getChanges(){return this._sendCommand("getChanges")}getCurrentTime(){return this._sendCommand("getCurrentTime")}getRemainingTime(){return this._sendCommand("getRemainingTime")}getProgress(){return this._sendCommand("getProgress")}getDuration(){return this._sendCommand("getDuration")}addEventListener(e,t){const n=this.eventHandlers.get(e);0===n.length&&this._sendNotification("addEventListener",[e]),n.push(t)}_dispatchEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n of this.eventHandlers.get(e))n(t)}_sendCommand(e,t){let n;const r=new Promise((e=>{n=e}));return this.resolves.set(this.nextId,n),this.worker.postMessage({method:e,params:t,id:this.nextId}),this.nextId++,r}_sendNotification(e,t){this.worker.postMessage({method:e,params:t})}_onMessage(e){void 0!==e.data.id?(this.resolves.get(e.data.id)(e.data.result),this.resolves.delete(e.data.id)):"onEvent"===e.data.method&&this._dispatchEvent(e.data.params.name,e.data.params.event)}}return e.create=function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=o.logger===console||void 0,l=new ht(r,e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return dt.includes(t)})));return n.autoPlay??=n.autoplay,n.speed??=1,{...n,...t}}(o,{logger:s})),i=o.logger??new t,{el:a,dispose:c}=ut(l,n,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return ft.includes(t)})));return n.autoPlay??=n.autoplay,n.controls??="auto",{...n,...t}}(o,{logger:i})),u=l.init(),d={el:a,dispose:c,getCurrentTime:()=>u.then(l.getCurrentTime.bind(l)),getDuration:()=>u.then(l.getDuration.bind(l)),play:()=>u.then(l.play.bind(l)),pause:()=>u.then(l.pause.bind(l)),seek:e=>u.then((()=>l.seek(e))),addEventListener:(e,t)=>l.addEventListener(e,t.bind(d))};return d},e}({});
